# 283バドミントン 出欠管理アプリ ユーザーマニュアル

## 概要

283バドミントンサークルのイベント出欠管理アプリです。LINEアカウントでログインして、練習会などのイベントへの参加・不参加を登録できます。

---

## アクセス方法

| 環境 | URL |
|------|-----|
| DEV環境 | https://dev-283-badminton-app-dae7h5bjbddcdnd3.japaneast-01.azurewebsites.net |
| ローカル | http://localhost:3000 |

---

## 機能一覧

### 1. ログイン・ログアウト

#### ログイン
1. トップページにアクセス
2. 「LINEでログイン」ボタンをクリック
3. LINEアカウントで認証
4. 初回ログイン時は「ゲスト」権限で登録されます

#### ログアウト
1. ヘッダーの「ログアウト」をクリック

---

### 2. プロフィール編集

**場所**: ヘッダー → 「プロフィール」

#### 編集可能な項目
| 項目 | 必須 | 公開範囲 | 説明 |
|------|------|----------|------|
| ニックネーム | ○ | 全員 | メンバーに表示される名前（50文字以内） |
| 姓 | - | 管理者のみ | 本名（非公開） |
| 名 | - | 管理者のみ | 本名（非公開） |
| 性別 | - | メンバー以上 | 男性/女性 |
| 年齢 | - | 設定による | 「年齢を公開する」で切り替え可能 |
| 一言コメント | - | メンバー以上 | 自己紹介など（500文字以内） |

---

### 3. イベント機能

#### イベント一覧を見る
**場所**: ヘッダー → 「イベント」

- **今後のイベント**: 開催日が近い順に表示
- **過去のイベント**: タブ切り替えで表示（新しい順）

#### イベント詳細を見る
イベントカードをクリックすると詳細画面が開きます。

表示される情報:
- イベント名
- 開催日時
- 場所
- 定員（設定されている場合）
- 参加費（表示設定されている場合）
- 締め切り（設定されている場合）
- 参加者数・キャンセル待ち数

#### 出欠を登録する
1. イベント詳細画面を開く
2. 「参加する」または「不参加」を選択
3. コメント（任意）を入力
4. 「登録する」をクリック

**キャンセル待ちについて**:
- 定員に達している場合、「参加する」を選ぶとキャンセル待ちになります
- 参加者がキャンセルすると、キャンセル待ち1番の人が自動で繰り上げになります

#### イベントを作成する（管理者・副管理者のみ）
**場所**: イベント一覧 → 「新規イベント」ボタン

入力項目:
| 項目 | 必須 | 説明 |
|------|------|------|
| タイトル | ○ | イベント名（100文字以内） |
| 説明 | - | イベントの詳細説明 |
| 開催日時 | ○ | 日付と時刻を選択 |
| 場所 | - | 開催場所 |
| 定員 | - | 上限人数（未設定で無制限） |
| 参加費 | - | 金額（表示/非表示を切り替え可能） |
| 締め切り | - | 出欠回答の締め切り日時 |

#### イベントを編集する（管理者・副管理者のみ）
イベント詳細画面 → 「編集」ボタン

#### イベントを削除する（管理者・副管理者のみ）
イベント詳細画面 → 「削除」ボタン

---

### 4. メンバー一覧

**場所**: ヘッダー → 「メンバー」

- メンバーが権限別にグループ表示されます
- 一般メンバー以上の権限があれば、性別・年齢・コメントも閲覧可能

---

### 5. 管理機能（管理者・副管理者のみ）

**場所**: ヘッダー → 「管理」

#### メンバー権限管理
「メンバー管理」から各メンバーの権限を変更できます。

---

## 権限について

| 権限 | 説明 |
|------|------|
| 管理者 (admin) | 全ての機能が使用可能 |
| 副管理者 (subadmin) | イベント作成・編集・削除、権限変更が可能 |
| 一般メンバー (member) | イベント参加、メンバー詳細閲覧が可能 |
| ビジター (visitor) | イベント参加のみ可能 |
| ゲスト (guest) | 初回ログイン時の権限。イベント参加のみ可能 |

### 権限別の機能一覧

| 機能 | admin | subadmin | member | visitor | guest |
|------|:-----:|:--------:|:------:|:-------:|:-----:|
| イベント閲覧 | ○ | ○ | ○ | ○ | ○ |
| 出欠登録 | ○ | ○ | ○ | ○ | ○ |
| 参加者一覧閲覧 | ○ | ○ | ○ | × | × |
| イベント作成/編集/削除 | ○ | ○ | × | × | × |
| メンバー詳細閲覧 | ○ | ○ | ○ | × | × |
| 権限変更 | ○ | ○ | × | × | × |
| 管理画面アクセス | ○ | ○ | × | × | × |

---

## 画面一覧

| パス | 画面名 | 説明 |
|------|--------|------|
| `/` | トップページ | ログイン前のランディングページ |
| `/login` | ログイン画面 | LINEログインボタン |
| `/events` | イベント一覧 | 今後/過去のイベント一覧 |
| `/events/new` | イベント作成 | 新規イベント作成フォーム |
| `/events/[id]` | イベント詳細 | 詳細表示・出欠登録 |
| `/events/[id]/edit` | イベント編集 | イベント編集フォーム |
| `/members` | メンバー一覧 | 権限別メンバー一覧 |
| `/profile` | プロフィール編集 | 自分のプロフィール編集 |
| `/admin` | 管理ダッシュボード | 管理メニュー |
| `/admin/members` | メンバー管理 | 権限変更 |

---

## トラブルシューティング

### ログインできない
- LINE DevelopersコンソールでコールバックURLが正しく設定されているか確認
- ブラウザのCookieを削除して再試行

### 「読み込み中...」から進まない
- ブラウザをリロード
- 開発サーバーが起動しているか確認 (`npm run dev`)

### 権限が「ゲスト」のまま
- 管理者に連絡して権限を変更してもらってください

---

## 開発者向け情報

### 技術スタック
- Next.js 16 + TypeScript
- Prisma (SQLite / Azure SQL Database)
- NextAuth.js (LINE OAuth)
- Tailwind CSS

### ローカル開発の起動方法
```bash
cd C:\Users\basaa\repos\283-badminton-app
npm run dev
```

### データベースのリセット
```bash
npx prisma db push --force-reset
```

---

*最終更新: 2024年12月*
